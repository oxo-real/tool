#!/usr/bin/env bash

## usage:	chln [directory]

: '
change symlinks $HOME to other $USER
old: /home/user01/dir/symlink
new: /home/user02/dir/symlink

default applies on $HOME/.config/shln
when it is moved to another $USER
# '

## non-default target
target="$1"

if [[ -z "$target" ]]; then

	target="$XDG_CONFIG_HOME/shln"

else

	:

fi


# execute chln

for symlink in $(find $target -type l); do

	new_target=$( \
	readlink $symlink | \
	cut -d / -f 4- | \
	awk -v new_home="$HOME/" '{print new_home $0}' \
	)

	ln -sf $new_target $symlink

done
